
@{
    Layout = null;
}

<section class="content ">
    <div class="panel panel-primary  no-padding">
        <div class="panel-heading">
            <span class="panel-icon">
                <i class="glyphicon glyphicon-list-alt"></i>
            </span>
            <span class="panel-title">User List</span>
        </div>
        <div class="panel-body" data-ng-init="ctrl.getUserList()">

            <dir-pagination-controls max-size="8" ng-hide="search.$.length > 0"
                                     direction-links="true"
                                     boundary-links="true"
                                     on-page-change="ctrl.onInitDatatable(newPageNumber)">
            </dir-pagination-controls>
            <div id="exportable">


                <table id="testtable" class="table table-hover table-striped table-condensed table-mailbox table-responsive" context-menu data-target="menu-table">
                    <tr>
                        <th></th>
                        <th>
                            User ID
                        </th>
                        <th>
                            Username
                        </th>
                        <th>
                            Fullname
                        </th>
                        <th>
                            Userrole
                        </th>
                        <th>
                            UserType
                        </th>
                    </tr>
                    <tr ng-repeat="x in ctrl.users|filter:search:strict">
                        <td><a class="pointer" data-ng-click="ctrl.onViewUserWarehouse(x.userId)"><span class="fa fa-pencil"></span></a></td>
                        <td>{{x.userId}}</td>
                        <td>{{x.username}}</td>
                        <td>{{x.firstname}} {{x.lastname}}</td>
                        <td>{{x.userrole}}</td>
                        <td>{{x.usertype ='E' ? 'Employee' : 'External Users' }}</td>
                    </tr>
                </table>
            </div>
            <dir-pagination-controls max-size="8" ng-hide="search.$.length > 0"
                                     direction-links="true"
                                     boundary-links="true"
                                     on-page-change="ctrl.onInitDatatable(newPageNumber)">
            </dir-pagination-controls>
        </div>
    </div>
</section>



<div id="modal-userwarehouse" class="popup-basic popup-lg bg-none mfp-with-anim mfp-hide">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>&nbsp; Warehouse List</span>
        </div>
        <div class="panel-body">
            <form class="form-horizontal">

                <div class="form-group row">
                    <div class="col-lg-12">

                        <input type="text" class="form-control" placeholder="Search..." data-ng-model="ctrl.searchwarehouse">
                    </div>

                </div>
            </form>

            <span>{{ctrl.lstWarehouse.userBranch.length}} line item </span>
            <div style="overflow:scroll; max-height:400px;">
                <table class="table table-hover table-condensed table-striped">
                    <tr>
                        <th><span class="glyphicon glyphicon-check " ng-click="ctrl.onselectAll(ctrl.lstWarehouse.userBranch)"></span></th>
                        <th>Branch Code</th>
                        <th>Name</th>
                        <th>Address</th>
                        
                    </tr>
                    <tr ng-repeat="wr in ctrl.lstWarehouse.userBranch|filter:ctrl.searchwarehouse:strict">
                        <td><input type="checkbox" data-ng-model="wr.isCheck"/></td>
                        <td>{{wr.brancode}}</td>
                        <td>{{wr.branname}}</td>
                        <td>{{wr.branaddress}}</td>
                  
                    </tr>
                </table>
            </div>
        </div>
        <div class="panel-footer text-right">
            <button class="btn btn-primary btn-rounded btn-gradient" data-ng-click="ctrl.onSaveWarehouse()">Save</button>
            <button class="btn btn-default btn-rounded btn-gradient" data-ng-click="closeModalForm()">Close</button>
        </div>
    </div>
</div>